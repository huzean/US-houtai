webpackJsonp([0],{"0ymZ":function(t,e,a){"use strict";var l={data:function(){return{loading:!1,isDisable:!1}},watch:{loading:function(t){this.$emit("loading",t)}},methods:{enterwarehouse:function(){var t=this,e=this;this.isDisable=!0,this.loading=!0,this.gob.postJson(this,{url:"usys-wdt-erp/management/stockOrder/stockInTask",arg:{}}).then(function(a){1e4==a.code?(t.$message("成功"),e.loading=!1,t.$emit("refresh"),setTimeout(function(){e.isDisable=!1},200)):(t.$emit("refresh"),t.$message(a.msg))})}}},r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"location"},[e("el-button",{staticStyle:{"margin-right":"100px"},attrs:{type:"primary",disabled:this.isDisable},on:{click:this.enterwarehouse}},[this._v("入库同步")])],1)])},staticRenderFns:[]};var i=a("C7Lr")(l,r,!1,function(t){a("ZqTn")},null,null);e.a=i.exports},"8DUg":function(t,e){},"U+yF":function(t,e){},V9aJ:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("4YfN"),r=a.n(l),i=a("0ymZ"),s={data:function(){return{loading:!1,isDisable:!1}},watch:{loading:function(t){this.$emit("loading",t)}},methods:{Stockout:function(){var t=this,e=this;this.isDisable=!0,this.loading=!0,this.gob.postJson(this,{url:"usys-wdt-erp/management/stockOrder/stockOutTask",arg:{}}).then(function(a){1e4==a.code?(t.$message("成功"),e.loading=!1,t.$emit("refresh"),setTimeout(function(){e.isDisable=!1},200)):(t.$emit("refresh"),t.$message(a.msg))})}}},n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"location"},[e("el-button",{staticStyle:{"margin-right":"100px"},attrs:{type:"success",disabled:this.isDisable},on:{click:this.Stockout}},[this._v(" 出库同步")])],1)])},staticRenderFns:[]};var o=a("C7Lr")(s,n,!1,function(t){a("8DUg")},null,null).exports,c={data:function(){return{batchOrderDialogVisible:!1,isLoading:!1,isGaindata:[],params:{currentPage:1,pageSize:10,total:null},listdata:{orderNo:"",status:"",orderType:"",srcOrderNo:"",stockType:2},stockoutId:null,orderTypes:[],stockinList:[],parameter:{currentPage:1,pageSize:5,total:null},batchOrderSubmitParams:{time:null},time:[]}},created:function(){this.gaindata()},methods:{handleShowDownloadBatchOrder:function(){this.batchOrderSubmitParams={time:""},this.batchOrderDialogVisible=!0},handleDownloadBatchOrder:function(){var t=this,e=this.batchOrderSubmitParams,a=(e.compoundParams,e.time);this.gob.postBlob(this,{url:"usys-wdt-erp/management/stockOrder/downloadOrder",arg:r()({},this.listdata,{endTime:a?a[1]:"",startTime:a?a[0]:"",orderTypes:this.orderTypes})}).then(function(e){console.log("111",e);var a=document.createElement("a");a.download="批量下载订单.xlsx";var l=new Blob([e]);a.href=URL.createObjectURL(l),a.click(),t.batchOrderDialogVisible=!1})},setLoading:function(t){this.isLoading=t},refresh:function(){this.getData(),this.gaindata()},problemSourceFormat:function(t){return"5"==t.status?"已取消":"50"==t.status?"待审核":"55"==t.status?"已审核":"95"==t.status?"已发货":"110"==t.status?"已完成":"113"==t.status?"异常发货":void 0},getData:function(){var t=this;this.stockoutId&&this.gob.postJson(this,{url:"usys-wdt-erp/management/stockOutDetails/selectList",arg:{page:{current:this.parameter.currentPage,size:this.parameter.pageSize},stockoutId:this.stockoutId}}).then(function(e){t.stockinList=e.data.stockOutDetailEntities,t.parameter.total=e.data.total})},handle:function(t,e,a){var l=this;this.stockoutId=t.stockoutId,this.parameter.currentPage=1,this.$nextTick(function(){l.getData()})},handleSizeChanges:function(t){this.parameter.pageSize=t,this.getData()},handleCurrentChange:function(t){this.parameter.currentPage=t,console.log("111",t),this.getData()},gaindata:function(){var t=this;this.gob.postJson(this,{url:"usys-wdt-erp/management/stockOutOrder/selectList ",arg:r()({},t.listdata,{page:{current:this.params.currentPage,size:this.params.pageSize},endTime:this.time?this.time[1]:"",startTime:this.time?this.time[0]:"",orderTypes:this.orderTypes})}).then(function(e){1e4==e.code&&(t.isGaindata=e.data.stockOutOrderEntities,t.params.total=e.data.total)})},handleSizeChange:function(t){this.params.pageSize=t,this.gaindata()},currentChange:function(t){this.params.currentPage=t,this.gaindata()},allList:function(){this.listdata.orderNo="",this.listdata.status="",this.listdata.orderType="",this.listdata.srcOrderNo="",this.listdata.stockType="",this.currentPage=1,this.gaindata()},checkList:function(){this.currentPage=1,this.gaindata()}},components:{outbutton:i.a,outbuttow:o}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("outbuttow",{on:{loading:t.setLoading,refresh:t.refresh}}),t._v(" "),a("el-form",{staticClass:"demo-ruleForm",attrs:{"label-width":"50px",inline:!0,model:t.listdata,type:"expand"}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"出库单号"},model:{value:t.listdata.orderNo,callback:function(e){t.$set(t.listdata,"orderNo",e)},expression:"listdata.orderNo"}})],1),t._v(" "),a("el-select",{attrs:{placeholder:"状态",clearable:""},model:{value:t.listdata.status,callback:function(e){t.$set(t.listdata,"status",e)},expression:"listdata.status"}},[a("el-option",{attrs:{label:"已取消",value:5}}),t._v(" "),a("el-option",{attrs:{label:"待审核",value:50}}),t._v(" "),a("el-option",{attrs:{label:"已审核",value:55}}),t._v(" "),a("el-option",{attrs:{label:"已发货",value:95}}),t._v(" "),a("el-option",{attrs:{label:"已完成",value:110}}),t._v(" "),a("el-option",{attrs:{label:"异常发货",value:113}})],1),t._v(" "),a("el-select",{staticStyle:{width:"360px"},attrs:{multiple:"","collapse-tags":"",placeholder:"出库单类型"},model:{value:t.orderTypes,callback:function(e){t.orderTypes=e},expression:"orderTypes"}},[a("el-option",{attrs:{label:"调拨出库",value:2}}),t._v(" "),a("el-option",{attrs:{label:"采购退货出库",value:3}}),t._v(" "),a("el-option",{attrs:{label:"盘亏出库",value:4}}),t._v(" "),a("el-option",{attrs:{label:"生产出库",value:5}}),t._v(" "),a("el-option",{attrs:{label:"其他出库",value:7}}),t._v(" "),a("el-option",{attrs:{label:"多发出库",value:8}}),t._v(" "),a("el-option",{attrs:{label:"纠错出库",value:9}}),t._v(" "),a("el-option",{attrs:{label:"保修配件出库",value:10}}),t._v(" "),a("el-option",{attrs:{label:"初始化出库",value:11}})],1),t._v(" "),a("el-form-item",[a("el-input",{attrs:{placeholder:"源单号"},model:{value:t.listdata.srcOrderNo,callback:function(e){t.$set(t.listdata,"srcOrderNo",e)},expression:"listdata.srcOrderNo"}})],1),t._v(" "),a("span",[t._v("出库时间：")]),t._v(" "),a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetimerange","default-time":["00:00:00","23:59:59"],"range-separator":"|",startPlaceholder:"开始日期",endPlaceholder:"结束日期"},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}}),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.checkList}},[t._v("查询")])],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.allList}},[t._v("全部")])],1),t._v(" "),a("el-form-item",[a("com_editBtn",{attrs:{plain:!0,size:"medium",val:"导出库单"},on:{handleClick:t.handleShowDownloadBatchOrder}})],1)],1),t._v(" "),a("div",{staticClass:"toolbar"}),t._v(" "),a("el-dialog",{staticStyle:{"margin-left":"120px"},attrs:{title:"详情",visible:t.batchOrderDialogVisible,"close-on-click-modal":!1,width:"80%"},on:{"update:visible":function(e){t.batchOrderDialogVisible=e}}},[a("div",{staticClass:"detail-title",staticStyle:{"margin-bottom":"20px"}},[a("span",{staticClass:"aside-left"},[t._v("\n        筛选范围：\n      ")]),t._v(" "),a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetimerange","default-time":["00:00:00","23:59:59"],"range-separator":"|",startPlaceholder:"开始日期",endPlaceholder:"结束日期"},model:{value:t.batchOrderSubmitParams.time,callback:function(e){t.$set(t.batchOrderSubmitParams,"time",e)},expression:"batchOrderSubmitParams.time"}})],1),t._v(" "),a("div",{staticStyle:{margin:"30px 0px"}},[a("el-form",[a("el-form-item",[a("span",{staticClass:"aside-left"},[t._v("\n            出库单号：\n          ")]),t._v(" "),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入内容"},model:{value:t.listdata.orderNo,callback:function(e){t.$set(t.listdata,"orderNo",e)},expression:"listdata.orderNo"}})],1)],1)],1),t._v(" "),a("div",{staticStyle:{margin:"20px 0px 20px 10px"}},[a("span",{staticClass:"aside-left"},[t._v(" 源单号： ")]),t._v(" "),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入内容"},model:{value:t.listdata.srcOrderNo,callback:function(e){t.$set(t.listdata,"srcOrderNo",e)},expression:"listdata.srcOrderNo"}})],1),t._v(" "),a("div",{staticStyle:{margin:"20px 0px 20px 23px"}},[a("span",{staticClass:"aside-left"},[t._v(" 状态：")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:t.listdata.status,callback:function(e){t.$set(t.listdata,"status",e)},expression:"listdata.status"}},[a("el-option",{attrs:{label:"已取消",value:5}}),t._v(" "),a("el-option",{attrs:{label:"待审核",value:50}}),t._v(" "),a("el-option",{attrs:{label:"已审核",value:55}}),t._v(" "),a("el-option",{attrs:{label:"已发货",value:95}}),t._v(" "),a("el-option",{attrs:{label:"已完成",value:110}}),t._v(" "),a("el-option",{attrs:{label:"异常发货",value:113}})],1)],1),t._v(" "),a("div",{staticStyle:{margin:"30px 0px 100px -20px","margin-bottom":"100px"}},[a("span",{staticClass:"aside-left"},[t._v("出库单类型：")]),t._v(" "),a("el-select",{staticStyle:{width:"360px"},attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},model:{value:t.orderTypes,callback:function(e){t.orderTypes=e},expression:"orderTypes"}},[a("el-option",{attrs:{label:"调拨出库",value:2}}),t._v(" "),a("el-option",{attrs:{label:"采购退货出库",value:3}}),t._v(" "),a("el-option",{attrs:{label:"盘亏出库",value:4}}),t._v(" "),a("el-option",{attrs:{label:"生产出库",value:5}}),t._v(" "),a("el-option",{attrs:{label:"其他出库",value:7}}),t._v(" "),a("el-option",{attrs:{label:"多发出库",value:8}}),t._v(" "),a("el-option",{attrs:{label:"纠错出库",value:9}}),t._v(" "),a("el-option",{attrs:{label:"保修配件出库",value:10}}),t._v(" "),a("el-option",{attrs:{label:"初始化出库",value:11}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer"},[a("el-button",{staticStyle:{"margiin-left":"100px"},attrs:{type:"primary"},nativeOn:{click:function(e){return t.handleDownloadBatchOrder(e)}}},[t._v("下载")]),t._v(" "),a("el-button",{staticStyle:{"margiin-left":"100px"},attrs:{type:"primary"},nativeOn:{click:function(e){t.batchOrderDialogVisible=!1}}},[t._v("关闭")])],1)]),t._v(" "),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],attrs:{data:t.isGaindata,"row-style":{height:"40px"}},on:{"row-click":t.handle}},[a("el-table-column",{attrs:{prop:"id",label:"序号",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{"header-align":"center",prop:"orderNo",label:"出库单号",width:"160"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"warehouseNo",label:"仓库编号",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",formatter:t.problemSourceFormat,label:"状态",width:"70"}}),t._v(" "),a("el-table-column",{attrs:{"header-align":"left",align:"center",prop:"orderType",label:"出库单类型",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[2==e.row.orderType?a("span",{staticStyle:{"margin-left":"10px"}},[t._v("调拨出库")]):t._e(),t._v(" "),3==e.row.orderType?a("span",{staticStyle:{"margin-left":"10px"}},[t._v("采购退货出库")]):t._e(),t._v(" "),4==e.row.orderType?a("span",{staticStyle:{"margin-left":"10px"}},[t._v("盘亏出库")]):t._e(),t._v(" "),5==e.row.orderType?a("span",{staticStyle:{"margin-left":"10px"}},[t._v("生产出库")]):t._e(),t._v(" "),7==e.row.orderType?a("span",{staticStyle:{"margin-left":"10px"}},[t._v("其他出库")]):t._e(),t._v(" "),8==e.row.orderType?a("span",{staticStyle:{"margin-left":"10px"}},[t._v("多发出库")]):t._e(),t._v(" "),9==e.row.orderType?a("span",{staticStyle:{"margin-left":"10px"}},[t._v("纠错出库")]):t._e(),t._v(" "),10==e.row.orderType?a("span",{staticStyle:{"margin-left":"10px"}},[t._v("保修配件出库")]):t._e(),t._v(" "),11==e.row.orderType?a("span",{staticStyle:{"margin-left":"10px"}},[t._v("初始化出库")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"goodsCount",label:"货品数量",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"srcOrderNo",label:"源单号",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"consignTime",label:"出库时间",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"createTime",label:"同步时间",width:"180"}})],1)],1),t._v(" "),a("el-pagination",{staticStyle:{margin:"20px 100px",float:"right"},attrs:{"page-sizes":[10,20,30,40],layout:"total, prev, pager, next","current-page":t.params.currentPage,"page-size":t.params.pageSize,total:t.params.total},on:{"current-change":t.currentChange,"size-change":t.handleSizeChange,"update:currentPage":function(e){return t.$set(t.params,"currentPage",e)},"update:current-page":function(e){return t.$set(t.params,"currentPage",e)}}}),t._v(" "),t.stockoutId?a("div",[a("el-table",{attrs:{data:t.stockinList,"row-style":{height:"40px"}}},[a("el-table-column",{attrs:{align:"center",prop:"id",label:"ID",width:"49"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"specNo",label:"商家编码",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"goodsCount",label:"货品数量",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"brandNo",label:" 品牌编号",width:"155"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"brandName",label:" 品牌名称",width:"140"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"goodsName",label:" 货品名称",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"goodsNo",label:" 货品编号",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"specName",label:" 规格名称",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"specCode",label:" 规格码",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"goodsUnit",label:" 单位",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"remark",label:" 备注",width:"155"}})],1),t._v(" "),a("el-pagination",{staticClass:"fr",staticStyle:{margin:"20px 100px"},attrs:{"current-page":t.parameter.currentPage,"page-size":t.parameter.pageSize,layout:"total, prev, pager, next",total:t.parameter.total},on:{"current-change":t.handleCurrentChange,"size-change":t.handleSizeChanges,"update:currentPage":function(e){return t.$set(t.parameter,"currentPage",e)},"update:current-page":function(e){return t.$set(t.parameter,"currentPage",e)}}})],1):t._e()],1)},staticRenderFns:[]};var p=a("C7Lr")(c,d,!1,function(t){a("U+yF")},"data-v-4ad77690",null);e.default=p.exports},ZqTn:function(t,e){}});